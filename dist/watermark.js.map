{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 9f748783f8cffae7395b","webpack:///./src/index.js","webpack:///./src/util/index.js"],"names":["_","require","INTERVAL","config","text","imgSrc","rotate","xSpace","ySpace","font","size","family","xStart","yStart","opacity","zIndex","color","parent","document","body","className","isNeedLoop","$items","offsetWidth","offsetHeight","isInited","isPainting","$wmContainer","markImg","reset","repaint","context","interval","clearTimeout","tId","setTimeout","call","getItemElement","$wrap","createElement","appendChild","cloneNode","innerText","setItemOffset","$item","style","top","removeChild","collectItems","left","width","height","push","initMark","Image","onload","src","Math","max","clientWidth","scrollWidth","documentElement","clientHeight","scrollHeight","tempY","tempX","length","clear","mark","loopPaint","originWidth","originHeight","cycle","initPaint","window","onresize","initMarkStyle","ID","head","getElementsByTagName","styles","map","item","join","getElementById","$head","$style","type","id","innerHTML","styleSheet","cssText","createTextNode","generateMarkContainer","setAttribute","opts","extend","isFunction","callback","shift","module","exports","isObject","arg","Object","prototype","toString","dest","source","key","hasOwnProperty"],"mappings":"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","file":"watermark.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"watermark\"] = factory();\n\telse\n\t\troot[\"watermark\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9f748783f8cffae7395b","const _ = require('./util');\n\nconst INTERVAL = 1e3;\n\nlet config = {\n  text: \"watermark\",\n  imgSrc: null,\n  rotate: 10,\n  xSpace: 80,\n  ySpace: 80,\n  font:{\n    size: 16,\n    family: '\"Helvetica Neue\", Helvetica, Arial, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei UI\", \"Microsoft YaHei\", sans-serif',\n  },\n  xStart: 40,\n  yStart: 40,\n  opacity: .08,\n  zIndex: 10000,\n  color: \"#ddd\",\n  parent: document.body,\n  className: 'water-mark-wrap',\n  isNeedLoop: true\n};\nlet $items = [],offsetWidth,offsetHeight,\n  isInited = false,isPainting = false;\n  $wmContainer = null,markImg = null,\n\n\nfunction reset(repaint, context, interval) {\n  clearTimeout(repaint.tId);\n  repaint.tId = setTimeout(function() {\n    repaint.call(context);\n  }, interval);\n}\n\nfunction getItemElement() {\n  let $wrap = document.createElement(\"div\");\n  if(config.imgSrc && markImg){\n    $wrap.appendChild(markImg.cloneNode(true));\n  }\n  $wrap.innerText = config.text;\n  $wrap.className = config.className;\n  return $wrap;\n}\n\nfunction setItemOffset() {\n  let parent = config.parent;\n  let $item = getItemElement();\n  $item.style.top = \"-1000px\";\n  parent.appendChild($item);\n  offsetWidth = $item.offsetWidth;\n  offsetHeight = $item.offsetHeight;\n  parent.removeChild($item);\n}\n\nfunction collectItems(left, top) {\n  let $item = getItemElement();\n  $item.style.left = left + \"px\";\n  $item.style.top = top + \"px\";\n  $item.style.width = offsetWidth + \"px\";\n  $item.style.height = offsetHeight + \"px\";\n  $wmContainer.appendChild($item);\n  $items.push($item);\n}\n\nfunction initMark() {\n  let width,height,parent = config.parent;\n  if (config.imgSrc) {\n    if(!markImg){\n      markImg = new Image;\n      markImg.onload = () => {\n        isPainting = true;\n        initMark();\n      };\n      markImg.src = config.imgSrc;\n      return;\n    }\n    if(!isPainting){\n      return;\n    }\n  }\n\n  let {xStart,yStart,xSpace,ySpace} = config;\n\n  [width,height] = [\n    Math.max(parent.clientWidth, parent.scrollWidth, document.documentElement.scrollWidth),\n    Math.max(parent.clientHeight, parent.scrollHeight, document.documentElement.scrollHeight)\n  ];\n\n  setItemOffset();\n\n  for (let tempY = yStart; height > tempY + offsetHeight; tempY += ySpace + offsetHeight) {\n    for (let tempX = xStart; width > tempX + offsetWidth; tempX += xSpace + offsetWidth) {\n      collectItems(tempX, tempY)\n    }\n  }\n}\n\nfunction repaint() {\n  if($items.length){\n    clear();\n    mark();\n  }\n}\n\nfunction loopPaint() {\n  let parent = config.parent;\n  let originWidth = Math.max(parent.clientWidth, parent.scrollWidth, document.documentElement.scrollWidth),\n    originHeight = Math.max(parent.clientHeight, parent.scrollHeight, document.documentElement.scrollHeight);\n\n  setTimeout(cycle, INTERVAL);\n\n  function cycle() {\n    let width = Math.max(parent.clientWidth, parent.scrollWidth, document.documentElement.scrollWidth),\n      height = Math.max(parent.clientHeight, parent.scrollHeight, document.documentElement.scrollHeight);\n    if(originWidth !== width || originHeight !== height){\n      originWidth = width;\n      originHeight = height;\n      repaint();\n    }\n    config.isNeedLoop && setTimeout(cycle, INTERVAL);\n  }\n}\n\nfunction initPaint() {\n  if(isInited){\n    return;\n  }\n  isInited = true;\n  window.onresize = function() {\n    reset(repaint, this, 300);\n  };\n  loopPaint();\n}\n\nfunction initMarkStyle() {\n  const ID = 'water-mark-style';\n  let $head = document.head || document.getElementsByTagName(\"head\")[0],\n    {className,zIndex,color,opacity,rotate,font:{size,family}} = config;\n    styles = `\n      .${className} {\n        position: absolute;\n        pointer-events: none;\n        z-index: ${zIndex};\n        font-size: \"${size}px\";\n        font-family: ${family};\n        color: \"${color}\";\n        opacity: ${opacity};\n        filter: alpha(opacity=${100 * opacity});\n        ${['-webkit-','-moz-','-o-','-ms-',''].map((item => {\n          return item + \"transform:rotate(\" + -rotate + \"deg);\";\n        })).join('')}\n      }\n    `;\n\n  document.getElementById(ID) && $head.removeChild(document.getElementById(ID));\n\n  $style = document.createElement(\"style\");\n  $style.type = 'text/css';\n  $style.id = ID;\n  $style.innerHTML = '';\n\n  $style.styleSheet ? $style.styleSheet.cssText = styles : $style.appendChild(document.createTextNode(styles));\n  $head.appendChild($style);\n}\n\nfunction generateMarkContainer() {\n  if($wmContainer){\n    return;\n  }\n  $wmContainer = document.createElement(\"div\");\n  $wmContainer.setAttribute('className','water-mark-container');\n  config.parent.appendChild($wmContainer);\n}\n\nfunction mark(opts) {\n  opts = opts || {};\n  _.extend(config, opts);\n  clear();\n  generateMarkContainer();\n  initMarkStyle();\n  initMark();\n  initPaint();\n  _.isFunction(opts.callback) && opts.callback();\n}\n\nfunction clear() {\n  if ($wmContainer){\n    markImg = null;\n    isPainting = false;\n    for (; $items.length ;){\n      $wmContainer.removeChild($items.shift());\n    }\n  }\n}\n\n\nmodule.exports = {\n  mark,\n  clear\n};\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = {\n  isObject(arg) {\n    return \"[object Object]\" === Object.prototype.toString.call(arg);\n  },\n  extend(dest, source) {\n    if (this.isObject(dest) && this.isObject(source)){\n      for (var key in source){\n        if (source.hasOwnProperty(key)) {\n          dest[key] = source[key];\n        }\n      }\n    }\n    return dest;\n  },\n  isFunction(arg){\n    return typeof arg === 'function';\n  },\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/index.js"],"sourceRoot":""}